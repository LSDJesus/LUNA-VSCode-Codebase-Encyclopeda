{
  "version": "1.0.0",
  "name": "base-file-summary",
  "description": "Base prompt for analyzing any source file and generating structured summaries",
  "userPromptTemplate": "Analyze this source file and generate BOTH a Markdown summary AND a JSON structure.\n\n**File**: `{{relativePath}}`\n\n**CRITICAL**: For EVERY component, function, class, and API, you MUST include line numbers where they appear. BUT:\n- Only include line numbers if you are CERTAIN (90%+ confident)\n- If unsure about exact lines, omit the \"lines\" field rather than guessing\n- Use the format \"lines\": \"123-168\" for ranges or \"lines\": \"42\" for single lines\n- For class definitions, include the ENTIRE class body range (from class keyword to last method)\n\n**Note**: Dependencies (imports) will be automatically extracted via static analysis. Focus on providing rich insights about purpose, components, public API, and implementation details.\n\n**Task**: Create a structured analysis optimized for AI agent consumption.\n\n**Output Format**: Return your response in TWO parts:\n\n1. First, output JSON wrapped in ```json markers:\n```json\n{\n  \"purpose\": \"One sentence describing what this file does\",\n  \"keyComponents\": [\n    {\"name\": \"ComponentName\", \"description\": \"What it does\", \"lines\": \"10-45\"},\n    {\"name\": \"functionName\", \"description\": \"What it does\", \"lines\": \"50\"}\n  ],\n  \"dependencies\": {\n    \"internal\": [],\n    \"external\": []\n  },\n  \"publicAPI\": [\n    {\n      \"signature\": \"export function doThing(param: string): Promise<Result>\",\n      \"description\": \"Description of what it does\",\n      \"inputTypes\": {\"param\": \"string\"},\n      \"returnType\": \"Promise<Result>\",\n      \"lines\": \"100-120\"\n    }\n  ],\n  \"codeLinks\": [\n    {\"symbol\": \"main_function\", \"path\": \"{{relativePath}}\", \"lines\": \"100-120\"}\n  ],\n  \"implementationNotes\": \"Important patterns, algorithms, or gotchas\",\n  \"functionCalls\": [\n    {\"function\": \"someFunction\", \"calledFrom\": \"callerName\", \"lines\": \"42-50\"}\n  ],\n  \"fileLevelMetadata\": {\n    \"exportedItemCount\": 5,\n    \"hasClasses\": true,\n    \"hasFunctions\": true,\n    \"complexity\": \"high/medium/low\"\n  }\n}\n```\n\n2. Then, output Markdown with proper working links:\n```markdown\n# {{fileName}}\n\n## Purpose\nOne concise paragraph.\n\n## Key Components\n- [`ComponentName`]({{relativePath}}#L10) (lines 10-45): Description\n- [`functionName()`]({{relativePath}}#L50) (line 50): Description\n\n## Public API\n- [`doThing(param: string): Promise<Result>`]({{relativePath}}#L100) (lines 100-120)\n  - **Input**: `param: string`\n  - **Output**: `Promise<Result>`\n  - **Description**: What the function does\n\n## Code Links\n- [main_function]({{relativePath}}#symbol=main_function)\n\n## Implementation Notes\nImportant details.\n\n## Function Calls\n- `someFunction()` - Called from `callerName()` at lines 42-50\n```\n\n**Source code**:\n```{{fileExtension}}\n{{content}}\n```\n\n**Important**: Be thorough in identifying:\n1. EVERY function/class call made in this file (don't just mention \"relies on utilities\", list each one)\n2. Structural metadata (number of exports, main components, overall complexity)",
  "additionalInstructions": [],
  "temperature": 0,
  "maxTokens": 2000
}
