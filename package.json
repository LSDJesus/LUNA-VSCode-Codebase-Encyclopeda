{
  "name": "luna-codebase-encyclopedia",
  "displayName": "LUNA Codebase Encyclopedia",
  "description": "Agent-First Context API: Generate structured summaries for instant Copilot queries + Educational code breakdowns for learning",
  "version": "1.1.20",
  "publisher": "ai-evolution",
  "icon": "resources/icon.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/LSDJesus/LUNA-VSCode-Codebase-Encyclopeda"
  },
  "homepage": "https://github.com/LSDJesus/LUNA-VSCode-Codebase-Encyclopeda#readme",
  "license": "MIT",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "AI",
    "Programming Languages",
    "Other"
  ],
  "keywords": [
    "copilot",
    "ai",
    "codebase",
    "documentation",
    "mcp",
    "agent",
    "context",
    "analysis"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "luna-encyclopedia.initialize",
        "title": "LUNA: Initialize Workspace",
        "icon": "$(gear)"
      },
      {
        "command": "luna-encyclopedia.generateSummaries",
        "title": "LUNA: Generate Codebase Summaries",
        "icon": "$(sync)"
      },
      {
        "command": "luna-encyclopedia.updateStale",
        "title": "LUNA: Update Stale Summaries",
        "icon": "$(refresh)"
      },
      {
        "command": "luna-encyclopedia.showSummary",
        "title": "LUNA: Show Summary Panel",
        "icon": "$(file)"
      },
      {
        "command": "luna-encyclopedia.summarizeFile",
        "title": "LUNA: Summarize This File",
        "icon": "$(file-code)"
      },
      {
        "command": "luna-encyclopedia.generateBreakdown",
        "title": "LUNA: Explain This Code (Breakdown)",
        "icon": "$(book)"
      },
      {
        "command": "luna-encyclopedia.previewFiles",
        "title": "LUNA: Preview Files to Summarize",
        "icon": "$(preview)"
      },
      {
        "command": "luna-encyclopedia.reregisterMCP",
        "title": "LUNA: Restart MCP Server",
        "icon": "$(sync)"
      },
      {
        "command": "luna-encyclopedia.reset",
        "title": "LUNA: Reset .codebase Directory",
        "icon": "$(trash)"
      },
      {
        "command": "luna-encyclopedia.regenerateMeta",
        "title": "LUNA: Regenerate Meta-Summaries",
        "icon": "$(refresh)"
      }
    ],
    "menus": {
      "explorer/context": [
        {
          "command": "luna-encyclopedia.summarizeFile",
          "group": "1_modification",
          "when": "resourceExtname =~ /^\\.(ts|tsx|js|jsx|py|go|rs|java|cpp|c|h)$/",
          "title": "LUNA: Summarize This File"
        },
        {
          "command": "luna-encyclopedia.generateBreakdown",
          "group": "1_modification",
          "when": "resourceExtname =~ /^\\.(ts|tsx|js|jsx|py|go|rs|java|cpp|c|h)$/",
          "title": "LUNA: Explain This Code"
        }
      ]
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "luna-encyclopedia",
          "title": "LUNA Encyclopedia",
          "icon": "resources/icon.svg"
        }
      ]
    },
    "views": {
      "luna-encyclopedia": [
        {
          "id": "luna-encyclopedia.summaryTree",
          "name": "Code Summaries",
          "icon": "resources/icon.svg"
        }
      ]
    },
    "configuration": {
      "title": "LUNA Encyclopedia",
      "properties": {
        "luna-encyclopedia.copilotModel": {
          "type": "string",
          "default": "gpt-4o",
          "enum": [
            "gpt-4o",
            "gpt-4.1",
            "gpt-5-mini",
            "raptor-mini",
            "claude-sonnet-4.5",
            "claude-sonnet-4",
            "claude-haiku-4.5",
            "gemini-3-flash",
            "gemini-3-pro",
            "gemini-2.5-pro",
            "gpt-5",
            "gpt-5.1",
            "gpt-5.2",
            "gpt-5-codex",
            "gpt-5.1-codex",
            "gpt-5.1-codex-mini",
            "gpt-5.1-codex-max",
            "claude-opus-4.5",
            "claude-opus-4.1",
            "grok-code-fast-1"
          ],
          "enumDescriptions": [
            "GPT-4o - FREE, great for summaries (recommended)",
            "GPT-4.1 - FREE, previous generation",
            "GPT-5 Mini - FREE, fast and efficient for summaries",
            "Raptor Mini - FREE, Microsoft's efficient model",
            "Claude Sonnet 4.5 - PAID (1x), excellent reasoning",
            "Claude Sonnet 4 - PAID (1x), strong performance",
            "Claude Haiku 4.5 - PAID (0.33x), fast and cheap",
            "Gemini 3 Flash - PAID (0.33x), Google's fast model",
            "Gemini 3 Pro - PAID (1x), Google's capable model",
            "Gemini 2.5 Pro - PAID (1x), Google's advanced model",
            "GPT-5 - PAID (1x), OpenAI's latest",
            "GPT-5.1 - PAID (1x), enhanced GPT-5",
            "GPT-5.2 - PAID (1x), newest GPT version",
            "GPT-5 Codex - PAID (1x), code-specialized",
            "GPT-5.1 Codex - PAID (1x), enhanced code model",
            "GPT-5.1 Codex Mini - PAID (0.33x), efficient code model",
            "GPT-5.1 Codex Max - PAID (1x), maximum capability code model",
            "Claude Opus 4.5 - PAID (3x), most capable Claude",
            "Claude Opus 4.1 - PAID (10x), very expensive but powerful",
            "Grok Code Fast 1 - PAID (0.25x), X.AI's fast code model"
          ],
          "markdownDescription": "Which Copilot model to use for generating code summaries.\n\n**FREE models** (good choices):\n- `gpt-4o` - Recommended for quality\n- `gpt-5-mini` - Recommended for speed\n- `raptor-mini` - Microsoft's efficient option\n\n**PAID models** require Copilot subscription and consume multiplier credits."
        },
        "luna-encyclopedia.fileTypesToInclude": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "ts",
            "tsx",
            "js",
            "jsx",
            "py",
            "java",
            "cs",
            "go",
            "rs",
            "cpp",
            "c",
            "h",
            "hpp"
          ],
          "markdownDescription": "File extensions to analyze (without the dot). Leave empty to analyze all files matching patterns.",
          "examples": [
            [
              "ts",
              "tsx",
              "js",
              "jsx"
            ],
            [
              "py"
            ],
            [
              "java",
              "scala",
              "kotlin"
            ]
          ]
        },
        "luna-encyclopedia.fileTypesToExclude": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "d.ts",
            "test.ts",
            "spec.ts",
            "test.js",
            "spec.js",
            "min.js",
            "min.css"
          ],
          "markdownDescription": "File patterns to exclude (e.g., 'test.ts' or 'min.js'). Useful for excluding test files and minified code.",
          "examples": [
            [
              "d.ts",
              "test.ts",
              "spec.ts"
            ],
            [
              "test.py",
              "mock.py"
            ]
          ]
        },
        "luna-encyclopedia.concurrentWorkers": {
          "type": "number",
          "default": 5,
          "minimum": 1,
          "maximum": 20,
          "description": "Number of parallel workers for analyzing files (1-20). Higher = faster but uses more API calls concurrently.",
          "markdownDescription": "Number of parallel workers for analyzing files.\n\n- **1-3**: Conservative (slower, careful with API limits)\n- **5**: Default (balanced, recommended)\n- **10+**: Aggressive (faster, requires good connection)\n\nDefault: **5**"
        },
        "luna-encyclopedia.branchAwareSummaries": {
          "type": "boolean",
          "default": false,
          "description": "Create separate summaries for each git branch (disabled by default)",
          "markdownDescription": "**Branch-Aware Summaries** (Advanced)\n\nWhen enabled:\n- Each git branch gets its own summaries (e.g., `file.feature-xyz.json`)\n- Queries return summaries matching current branch\n- Falls back to main branch if branch-specific summary missing\n\n**Use cases**:\n- Feature branches with significant code changes\n- Multiple developers working on different branches\n- Need accurate summaries per branch\n\n**Default: Disabled** (single set of summaries for all branches)"
        },
        "luna-encyclopedia.enableCopilotQA": {
          "type": "boolean",
          "default": true,
          "description": "Use Copilot to review and verify deterministic analysis results",
          "markdownDescription": "**Copilot Quality Assurance** (Recommended)\n\nWhen enabled:\n- Dead code analysis is verified by Copilot (reduces false positives)\n- Complexity scores are validated against actual code patterns\n- Component categorization is reviewed for accuracy\n- Staleness detection is enhanced with semantic change analysis\n\n**Benefits**:\n- Fewer false positive \"dead code\" alerts\n- More accurate complexity recommendations\n- Framework-aware analysis (ComfyUI, Django, FastAPI, etc.)\n\n**Cost**: Additional Copilot API calls after initial analysis\n\n**Default: Enabled**"
        },
        "luna-encyclopedia.maxFileSize": {
          "type": "number",
          "default": 500,
          "minimum": 50,
          "maximum": 2000,
          "description": "Maximum file size (in KB) to analyze. Larger files are skipped.",
          "markdownDescription": "Maximum file size in kilobytes to analyze.\n\n- Files larger than this limit are skipped\n- Very large files may timeout or use excessive tokens\n\n**Default: 500KB**"
        },
        "luna-encyclopedia.breakdownVerbosity": {
          "type": "string",
          "default": "intermediate",
          "enum": [
            "beginner",
            "intermediate",
            "expert"
          ],
          "enumDescriptions": [
            "Beginner: Full code included, line-by-line explanations, analogies, diagrams, common mistakes - for learning the language/framework",
            "Intermediate: Key snippets, clear explanations, important patterns and gotchas - for developers new to the codebase",
            "Expert: High-level architecture, design decisions, tricky sections only - for quick onboarding"
          ],
          "markdownDescription": "How detailed should code breakdowns be?\n\n- **Beginner** ðŸ“š: Learning the language/framework - explains everything including syntax\n- **Intermediate** ðŸ“–: Knows the language - focuses on project-specific patterns\n- **Expert** âš¡: Quick onboarding - just architecture and gotchas\n\n**Default: Intermediate**"
        },
        "luna-encyclopedia.manualRouteDirectories": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "markdownDescription": "Additional directories to search for API route files. Use this if your routes don't match standard patterns (e.g., `[\"src/api\", \"backend/routes\", \"server/handlers\"]`). Paths are relative to workspace root."
        },
        "luna-encyclopedia.defaultWorkerModel": {
          "type": "string",
          "default": "gpt-4o",
          "enum": [
            "gpt-4o",
            "gpt-4.1",
            "gpt-5-mini",
            "raptor-mini",
            "claude-haiku-4.5",
            "gemini-3-flash"
          ],
          "enumDescriptions": [
            "GPT-4o - FREE, recommended default for workers",
            "GPT-4.1 - FREE, solid performance",
            "GPT-5 Mini - FREE, fast for simple tasks",
            "Raptor Mini - FREE, Microsoft's efficient model",
            "Claude Haiku 4.5 - PAID (0.33x), fastest Claude",
            "Gemini 3 Flash - PAID (0.33x), Google's fast model"
          ],
          "markdownDescription": "Default model for background worker agents spawned by Copilot Chat.\n\n**Recommended: gpt-4o** (FREE, good quality)\n\nWorker agents handle delegated tasks like:\n- Documentation generation\n- Test creation\n- Code search and summarization\n- Repetitive file edits\n\nUse FREE models to minimize cost while main agent (you) uses premium model."
        },
        "luna-encyclopedia.workerConcurrencyLimit": {
          "type": "number",
          "default": 3,
          "minimum": 1,
          "maximum": 10,
          "markdownDescription": "Maximum number of background worker agents running simultaneously.\n\n- **1-2**: Conservative, minimal API load\n- **3**: Recommended default\n- **5-10**: Aggressive parallelization\n\n**Default: 3**"
        },
        "luna-encyclopedia.workerTimeoutSeconds": {
          "type": "number",
          "default": 300,
          "minimum": 30,
          "maximum": 1800,
          "markdownDescription": "Maximum time (in seconds) a worker agent can run before timing out.\n\n**Default: 300 seconds (5 minutes)**"
        },
        "luna-encyclopedia.workerAutoCleanupHours": {
          "type": "number",
          "default": 24,
          "minimum": 1,
          "maximum": 168,
          "markdownDescription": "Automatically delete completed worker task results after this many hours.\n\n**Default: 24 hours**"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile && npm run build:mcp",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "build:mcp": "cd mcp-server && npm run build && cd ..",
    "build:all": "npm run compile && npm run build:mcp",
    "dev": "npm run build:all && echo Ready! Reload VS Code window to test.",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "node ./out/test/runTest.js"
  },
  "devDependencies": {
    "@types/node": "^20.x",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.13.0",
    "@typescript-eslint/parser": "^6.13.0",
    "eslint": "^8.54.0"
  },
  "dependencies": {
    "marked": "^11.0.0",
    "minimatch": "^9.0.5",
    "typescript": "^5.3.2"
  }
}
